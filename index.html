<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>××•×§××¤ â€“ ×˜×•×¤×¡ ×©××œ×”-×‘××¡×š</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- <style>
  :root{
    color-scheme: dark;
    --bg:#0f0f11;
    --text:#fff;
    --muted:#a9abb1;
    --primary:#7c497b;
    --danger:#ff7b7b;
    --line:#383a40;
    --font:"Rubik",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
  }
  *{box-sizing:border-box}
  html,body{min-height:100dvh}
  body{
    margin:0; font-family:var(--font); color:var(--text);
    background:
      radial-gradient(70vw 70vh at 80% -10%, rgba(124,73,123,.28), transparent 60%),
      radial-gradient(70vw 70vh at 10% 110%, rgba(124,73,123,.18), transparent 36%),
      var(--bg);
  }

  /* Header (× ×©××¨) */
  .wrap{max-width:1080px; margin:0 auto; padding:18px}
  .head{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 2px 12px}
  .title{font-weight:700}
  .progress{display:flex; align-items:center; gap:10px; width:300px; max-width:50%}
  .bar{position:relative; height:7px; flex:1; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden}
  .bar > span{position:absolute; inset:0 100% 0 0; background:var(--primary); transition:all .25s ease}
  .count{font-weight:600; color:var(--muted); min-width:60px; text-align:center}

  /* ×–×¨×™××ª ××¡×›×™× ×‘×’×œ×™×œ×” */
  .qflow{
    position: relative;
    height: 100dvh;
    max-height: 100svh;
    overflow-y: auto;
    scroll-snap-type: y mandatory;
    -webkit-overflow-scrolling: touch;
  }
  .q{
    min-height: 100dvh;
    scroll-snap-align: start;
    display:flex; align-items:center; justify-content:center;
    padding: 24px 18px;
  }

  /* â€”â€”â€” ×¡×’× ×•×Ÿ "×”××¡×š ×”×¨××©×•×Ÿ × ×©××¨ ×›××• ×©×”×•×" â€”â€”â€” */
  .q.classic .qbox{
    width:100%; max-width:760px;
    background: rgba(255,255,255,.10);
    border:1px solid rgba(255,255,255,.18);
    border-radius:18px;
    padding:16px 16px 18px;
    box-shadow: 0 16px 40px rgba(0,0,0,.35), inset 0 1px 2px rgba(255,255,255,.12);
  }

  /* â€”â€”â€” ×¡×’× ×•×Ÿ Typeform ×œ××¡×›×™× 2+ â€”â€”â€” */
  .q.tf .stage{
    width: min(900px, 92vw);
  }
  .q.tf .ask{
    font-weight:700;
    line-height:1.35;
    font-size: clamp(22px, 3.2vw, 36px);
    text-align:center;
    margin: 0 0 30px;
  }
  .q.tf .fieldline{
    display:flex; align-items:center; gap:10px;
    border-bottom:1px solid #5a5a5a;
    padding: 10px 4px 14px;
  }
  .q.tf input[type="text"],
  .q.tf input[type="email"],
  .q.tf input[type="tel"],
  .q.tf textarea,
  .q.tf select{
    appearance:none; border:none; outline:none; background:transparent; color:var(--text);
    width:100%; font: inherit; font-size: clamp(18px, 2vw, 22px);
  }
  .q.tf input::placeholder,.q.tf textarea::placeholder{color:#bdbdbd}
  .q.tf .ok{
    flex: none;
    border:1px solid rgba(255,255,255,.22);
    background:rgba(255,255,255,.06);
    color:#fff; font-weight:700;
    padding:10px 16px; border-radius:10px; cursor:pointer;
  }
  .q.tf .ok:focus{outline:2px solid var(--primary); outline-offset:2px}
  .q.tf .meta{
    margin-top:10px; font-size:12px; color:var(--muted); text-align:center;
  }
  .q.tf .error{
    display:none; color:var(--danger); font-size:13px; margin-top:8px; text-align:center;
  }
  .q.tf.invalid .error{display:block}

  /* ×§×œ×˜×™× ×›×œ×œ×™×™× (×œ××¡×š ×”×¨××©×•×Ÿ) */
  .label{font-weight:600; margin-bottom:5px}
  .req{color:var(--danger)}
  .hint{margin-top:8px; font-size:12px; color:var(--muted)}
  .field{display:flex; flex-direction:column; gap:8px}
  input,textarea,select,button{font:inherit; color:var(--text)}
  .classic input[type="text"], .classic input[type="email"], .classic input[type="tel"], .classic textarea, .classic select{
    appearance:none; width:100%;
    background: rgba(255,255,255,.06);
    border: 1px solid var(--line);
    border-radius:12px; padding:12px 12px; font-size:18px; outline:none; margin-bottom: 10px;
  }
  .classic input:focus,.classic textarea:focus,.classic select:focus{
    border-color: var(--primary);
    background: rgba(255,255,255,.08);
  }
  .classic .error{display:none; color:var(--danger); font-size:13px}
  .classic .invalid .error{display:block}

  /* ×¤×•×˜×¨ ×›×¤×ª×•×¨×™× × ×©××¨ */
  .footer{
    position: sticky; bottom:0; inset-inline:0;
    display:flex; justify-content:space-between; gap:10px;
    padding:12px 0;
    background: linear-gradient(180deg, transparent, rgba(0,0,0,.25));
    max-width:1080px; margin:0 auto;
  }
  .btn{border:none; cursor:pointer; padding:12px 16px; border-radius:12px; font-weight:700}
  .btn-primary{ background:var(--primary); color:#fff }
  .btn-ghost{ background:rgba(255,255,255,.08); color:#fff; border:1px solid rgba(255,255,255,.18) }

  @media (hover:none) and (pointer:coarse){
    html,body{ overscroll-behavior-y:none; }
  }


  /*×›×œ ××” ×©×§×©×•×¨ ×œ×œ×•××“×¨***************************************************************/
  /* ×©×›×‘×ª ×œ×•××“×¨ ××¨×›×–×™×ª */
#loader {
  position: fixed;
  inset: 0;
  z-index: 99999;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,0.85); /* ×¨×§×¢ ×›×”×”-×©×§×•×£ ×›××• Typeform */
  backdrop-filter: blur(2px);   /* ××¤×§×˜ ×˜×©×˜×•×© ×¢×“×™×Ÿ (××•×¤×¦×™×•× ×œ×™) */
  transition: opacity .6s ease, visibility .6s ease;
}

#loader.hide {
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
}

.loader-box {
  text-align: center;
}

.powered {
  font-size: 12px;
  color: #aaa;
  margin-bottom: 6px;
  letter-spacing: .5px;
}

.logo {
  height: 40px;
  width: auto;
  display: block;
  margin: 0 auto 14px;
  opacity: .95;
}

/* === ×‘×¨ ×”×˜×¢×™× ×” ×¢× ×”×× ×™××¦×™×” ×©×œ×š === */
/* === ×‘×¨ ×”×˜×¢×™× ×” ×¢× ×”×× ×™××¦×™×” ×©×œ×š === */
.loader {
  height: 4px;
  width: 130px;
  margin: 0 auto;

  /* ×©× ×™ ×’×¨×“×™×× ×˜×™× "×¨×¦×™×" + ×©×›×‘×ª ×‘×¡×™×¡ ×‘×”×™×¨×” */
  --c:no-repeat linear-gradient(var(--brand, #6100ee) 0 0);
  background: var(--c), var(--c), #d7b8fc;
  background-size: 60% 100%;
  background-repeat: no-repeat, no-repeat, no-repeat;
  animation: l16 3s infinite;
  border-radius: 999px;
  box-shadow: 0 0 0 1px rgba(255,255,255,.08) inset;
}

@keyframes l16 {
  0%   { background-position:-150% 0, -150% 0, 0 0 }
  66%  { background-position: 250% 0, -150% 0, 0 0 }
  100% { background-position: 250% 0,  250% 0, 0 0 }
}


 /*×›×œ ××” ×©×§×©×•×¨ ×œ×•×™×“××• ×‘×”×ª×—×œ×”***************************************************************/
/* ×•×™×“××•/×××‘×“ ×‘×¢×™×¦×•×‘ ×–×›×•×›×™×ª + ×¨×¡×¤×•× ×¡×™×‘×™ */
.video-wrap {
  position: relative;
  width: 100%;
  max-width: 720px;   /* ××¤×©×¨ ×œ×©× ×•×ª ×œ×¤×™ ×”×¦×•×¨×š */
  aspect-ratio: 16/9; /* ×™×—×¡ ××¡×š ×¡×˜× ×“×¨×˜×™ */
  margin: 20px auto;
  border-radius: 18px;
  overflow: hidden;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
}

.video-wrap iframe {
  width: 100%;
  height: 100%;
  border: none;
  display: block;
}

.video-wrap .overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;           /* ×©×œ× ×™×¤×¨×™×¢ ×œ×œ×—×™×¦×” ×¢×œ ×”×¤×œ×™×™ */
  border-radius: 18px;
}


/*×¢×¨×™×›×ª ×¡×©×§×Ÿ ××ª×—×¨×™×*/
.repeater { display: grid; gap: 10px; }
.rep-row { display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 8px; align-items: center; }
.rep-row input { width: 100%; }
@media (max-width: 640px){ .rep-row { grid-template-columns: 1fr; } }

  </style> -->
<style>
:root{
  color-scheme: dark;
  --bg:#0f0f11;
  --text:#fff;
  --muted:#a9abb1;
  --primary:#7c497b;
  --danger:#ff7b7b;
  --line:#383a40;
  --font:"Rubik",system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Apple Color Emoji","Segoe UI Emoji";
}

/* ×‘×¡×™×¡ */
*{box-sizing:border-box}
html,body{height:100%; min-height:100dvh}
body{
  margin:0; font-family:var(--font); color:var(--text);
  background:
    radial-gradient(70vw 70vh at 80% -10%, rgba(124,73,123,.28), transparent 60%),
    radial-gradient(70vw 70vh at 10% 110%, rgba(124,73,123,.18), transparent 36%),
    var(--bg);

  /* ===== ××¨×›×– ××¡×š ×××™×ª×™ ×‘×™×Ÿ Header/Footer ===== */
  display:grid;
  grid-template-rows: auto 1fr auto; /* header | content | footer */
  grid-template-columns: 100%;
}

/* Header */
.wrap{max-width:1080px; margin:0 auto; padding:18px; width:100%}
.head{display:flex; align-items:center; justify-content:space-between; gap:12px; padding:8px 2px 12px}
.title{font-weight:700}
.progress{display:flex; align-items:center; gap:10px; width:300px; max-width:50%}
.bar{position:relative; height:7px; flex:1; background:rgba(255,255,255,.08); border-radius:999px; overflow:hidden}
.bar>span{position:absolute; inset:0 100% 0 0; background:var(--primary); transition:all .25s ease}
.count{font-weight:600; color:var(--muted); min-width:60px; text-align:center}

/* ===== ×–×¨×™××ª ××¡×›×™× â€“ ×××•×¨×›×–×ª ×‘×¢×–×¨×ª grid-row:2 ===== */
.qflow{
  grid-row: 2;           /* ×©×•×¨×ª ×”×ª×•×›×Ÿ ×©×œ ×”-Grid */
  position: relative;
  height: 100%;
  max-height: 100%;
  overflow-y: auto;
  scroll-snap-type: y mandatory;
  -webkit-overflow-scrolling: touch;
}

/* ×›×œ ××¡×š ×©××œ×” ×ª×•×¤×¡ ××ª ×›×œ ×”×’×•×‘×” ×”×–××™×Ÿ ×•× ××¦× ×‘××¨×›×– */
.q{
  min-height: 100%;
  scroll-snap-align: start;
  display:flex; align-items:center; justify-content:center;
  padding: 24px 18px;
}

/* â€”â€”â€” ××¡×š ×¨××©×•×Ÿ â€“ ×§××¨×“ â€”â€”â€” */
.q.classic .qbox{
  width:100%; max-width:760px;
  background: rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.18);
  border-radius:18px;
  padding:16px 16px 18px;
  box-shadow: 0 16px 40px rgba(0,0,0,.35), inset 0 1px 2px rgba(255,255,255,.12);
}

/* â€”â€”â€” ×¡×’× ×•×Ÿ Typeform ×œ××¡×›×™× 2+ â€”â€”â€” */
.q.tf .stage{ width: min(900px, 92vw); }
.q.tf .ask{
  font-weight:700; line-height:1.35;
  font-size: clamp(22px, 3.2vw, 36px);
  text-align:center; margin: 0 0 30px;
}
.q.tf .fieldline{
  display:flex; align-items:center; gap:10px;
  border-bottom:1px solid #5a5a5a;
  padding: 10px 4px 14px;
}
.q.tf input[type="text"],
.q.tf input[type="email"],
.q.tf input[type="tel"],
.q.tf textarea,
.q.tf select{
  appearance:none; border:none; outline:none; background:transparent; color:var(--text);
  width:100%; font: inherit; font-size: clamp(18px, 2vw, 22px);
}
.q.tf input::placeholder,.q.tf textarea::placeholder{color:#bdbdbd}
.q.tf .ok{
  flex:none; border:1px solid rgba(255,255,255,.22);
  background:rgba(255,255,255,.06);
  color:#fff; font-weight:700;
  padding:10px 16px; border-radius:10px; cursor:pointer;
}
.q.tf .ok:focus{outline:2px solid var(--primary); outline-offset:2px}
.q.tf .meta{ margin-top:10px; font-size:12px; color:var(--muted); text-align:center; }
.q.tf .error{ display:none; color:var(--danger); font-size:13px; margin-top:8px; text-align:center; }
.q.tf.invalid .error{ display:block }

/* ×§×œ×˜×™× ×›×œ×œ×™×™× (×œ××¡×š ×”×¨××©×•×Ÿ) */
.label{font-weight:600; margin-bottom:5px}
.req{color:var(--danger)}
.hint{margin-top:8px; font-size:12px; color:var(--muted)}
.field{display:flex; flex-direction:column; gap:8px}
input,textarea,select,button{font:inherit; color:var(--text)}
.classic input[type="text"], .classic input[type="email"], .classic input[type="tel"], .classic textarea, .classic select{
  appearance:none; width:100%;
  background: rgba(255,255,255,.06);
  border: 1px solid var(--line);
  border-radius:12px; padding:12px 12px; font-size:18px; outline:none; margin-bottom: 10px;
}
.classic input:focus,.classic textarea:focus,.classic select:focus{
  border-color: var(--primary);
  background: rgba(255,255,255,.08);
}
.classic .error{display:none; color:var(--danger); font-size:13px}
.classic .invalid .error{display:block}

/* ×¤×•×˜×¨ (× ×©××¨) â€“ ×”×•× ×‘×©×•×¨×” ×”×©×œ×™×©×™×ª ×©×œ ×”-Grid */
.footer{
  grid-row: 3;
  position: sticky; bottom:0; inset-inline:0;
  display:flex; justify-content:space-between; gap:10px;
  padding:12px 0;
  background: linear-gradient(180deg, transparent, rgba(0,0,0,.25));
  max-width:1080px; margin:0 auto; width:100%;
}
.btn{border:none; cursor:pointer; padding:12px 16px; border-radius:12px; font-weight:700}
.btn-primary{ background:var(--primary); color:#fff }
.btn-ghost{ background:rgba(255,255,255,.08); color:#fff; border:1px solid rgba(255,255,255,.18) }

/* ××•×‘×™×™×œ â€“ ××•× ×¢ "×§×¤×™×¦×•×ª" overscroll */
@media (hover:none) and (pointer:coarse){
  html,body{ overscroll-behavior-y:none; }
}

/* ×œ×•××“×¨ */
#loader{
  position: fixed; inset:0; z-index:99999;
  display:flex; align-items:center; justify-content:center;
  background: rgba(0,0,0,0.85);
  backdrop-filter: blur(2px);
  transition: opacity .6s ease, visibility .6s ease;
}
#loader.hide{ opacity:0; visibility:hidden; pointer-events:none; }
.loader-box{text-align:center}
.powered{font-size:12px; color:#aaa; margin-bottom:6px; letter-spacing:.5px}
.logo{height:40px; width:auto; display:block; margin:0 auto 14px; opacity:.95}
.loader{
  height:4px; width:130px; margin:0 auto;
  --c:no-repeat linear-gradient(var(--brand,#6100ee) 0 0);
  background: var(--c), var(--c), #d7b8fc;
  background-size:60% 100%; background-repeat:no-repeat;
  animation:l16 3s infinite; border-radius:999px;
  box-shadow:0 0 0 1px rgba(255,255,255,.08) inset;
}
@keyframes l16{
  0%{background-position:-150% 0,-150% 0,0 0}
  66%{background-position:250% 0,-150% 0,0 0}
  100%{background-position:250% 0,250% 0,0 0}
}

/* ×•×™×“××• ×¤×ª×™×—×” */
.video-wrap{
  position:relative; width:100%; max-width:720px; aspect-ratio:16/9;
  margin:20px auto; border-radius:18px; overflow:hidden;
  box-shadow:0 8px 30px rgba(0,0,0,0.4);
}
.video-wrap iframe{ width:100%; height:100%; border:none; display:block; }
.video-wrap .overlay{ position:absolute; inset:0; pointer-events:none; border-radius:18px; }

/* ×¨×¤×™×˜×¨×™× (××ª×—×¨×™×/×¨×¤×¨× ×¡×™×) */
.repeater{ display:grid; gap:10px; }
.rep-row{ display:grid; grid-template-columns:1fr 1fr 1fr auto; gap:8px; align-items:center; }
.rep-row input{ width:100%; }
@media (max-width:640px){
  .rep-row{ grid-template-columns:1fr; }
}
</style>


</head>
<body>
        <!-- LOADER -->
        <div id="loader">
        <div class="loader-box">
            <div class="powered">Powered by</div>
            <!-- ×”×—×œ×£ ×œ× ×ª×™×‘ ×”×œ×•×’×• ×©×œ×š ××• ×”×©××¨ ×˜×§×¡×˜ -->
            <img class="logo" src="png/Logo.png" alt="Your Brand Logo">
            <div class="loader"></div>
        </div>
        </div>

  <div class="wrap">
    <div class="head">
      <div class="title">×©××œ×•×Ÿ ×‘×¨×™×£ â€“ ×©××œ×” ××—×ª ×‘×›×œ ××¡×š</div>
      <div class="progress">
        <div class="bar" aria-hidden="true"><span id="bar"></span></div>
        <b class="count" id="counter">1 / 5</b>
      </div>
    </div>
  </div>

  <!-- ×¤×× ×œ×™ ×”×©××œ×•×ª -->
  <div class="qflow" id="qflow">

        <!-- Q0: × ×©××¨ ×›××• ×©×”×™×” -->
    <section class="q classic">
      <div class="qbox">
          <div class="title">×©××œ×•×Ÿ ×‘×¨×™×£ â€“ ×©××œ×” ××—×ª ×‘×›×œ ××¡×š</div>
          <p class="muted">
    ×”×©××œ×•×Ÿ ×œ×•×§×— ×›-8â€“12 ×“×§×•×ª. ×‘×›×œ ×©×œ×‘ ×ª××œ×/×™ ××¢×˜ ×©×“×•×ª ×•×ª×•×›×œ/×™ ×œ× ×•×•×˜ ×§×“×™××”/××—×•×¨×”.
    ×”× ×ª×•× ×™× × ×©××¨×™× ××§×•××™×ª ×›×“×™ ×©×œ× ×ª××‘×“/×™ ×”×ª×§×“××•×ª.
  </p>

  <div class="video-wrap">
    <iframe
      src="https://www.youtube.com/embed/lpEeYwrkBPU?rel=0&controls=1&modestbranding=1"
      title="Intro video"
      frameborder="0"
      loading="lazy"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      allowfullscreen>
    </iframe>
  </div>
      </div>
    </section>


    <!-- Q1: × ×©××¨ ×›××• ×©×”×™×” -->
    <section class="q classic">
      <div class="qbox">
        <div class="field" data-req>
          <div class="label">×©× ××œ× <span class="req">*</span></div>
          <input type="text" name="full_name" placeholder="×™×©×¨××œ ×™×©×¨××œ×™">
          <div class="error">× × ×œ××œ× ×©×</div>
        </div>
        <div class="field" data-req>
          <div class="label">××™××™×™×œ <span class="req">*</span></div>
          <input type="email" name="email" placeholder="name@example.com">
          <div class="error">× × ×œ××œ× ××™××™×™×œ ×ª×§×™×Ÿ</div>
        </div>
        <div class="field" data-req>
          <div class="label">×˜×œ×¤×•×Ÿ <span class="req">*</span></div>
          <input type="tel" name="phone" placeholder="050-234-5678" inputmode="tel">
          <div class="error">×˜×œ×¤×•×Ÿ ×œ× ×ª×§×™×Ÿ</div>
        </div>
        <div class="hint">×’×œ×•×œ/×™ ×§×œ×•×ª ×œ××˜×” ×›×“×™ ×œ×¢×‘×•×¨ ×œ×©××œ×” ×”×‘××” â€¢ Enter ×’× ×¢×•×‘×“</div>
      </div>
    </section>
<!-- Q1: ×¨×§×¢ ×¢×œ ×”××•×ª×’ -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">×¡×¤×¨/×™ ×‘×§×¦×¨×” ×¢×œ ×”××•×ª×’ â€“ ××ª×™ × ×¤×ª×—, ××” ×”×•× ×‘× ×œ×¤×ª×•×¨?</h2>
    <div class="fieldline">
      <textarea name="brand_background" rows="5" placeholder="×œ×“×•×’××”: × ×¤×ª×— ×‘Ö¾2020 ×›×“×™ ×œ×¤×ª×•×¨... ×§×”×œ ×™×¢×“, ×‘×™×“×•×œ, ×¢×¨×š ×™×™×—×•×“×™."></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×¨×§×¢</div>
  </div>
</section>

<!-- Q2: SWOT â€“ ×¢×•×¦××•×ª -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">SWOT â€“ ×¢×•×¦××•×ª: ××” ×× ×—× ×• ×¢×•×©×™× ×˜×•×‘ ×‘××™×•×—×“?</h2>
    <div class="fieldline">
      <textarea name="swot_strengths" rows="5" placeholder="×œ×“×•×’××”:
â€¢ ×©×™×¨×•×ª ××™×©×™ ×•××”×™×¨
â€¢ ××™×›×•×ª ××•×¦×¨ ×’×‘×•×”×”
â€¢ ×ª××—×•×¨ ×ª×—×¨×•×ª×™
â€¢ ×§×”×™×œ×ª ×œ×§×•×—×•×ª × ××× ×”"></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×¢×•×¦××•×ª</div>
  </div>
</section>

<!-- Q3: SWOT â€“ ×—×•×œ×©×•×ª -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">SWOT â€“ ×—×•×œ×©×•×ª: ××™×¤×” ×§×™×™××™× ×¤×¢×¨×™× ××• ×—×¡×¨×•× ×•×ª?</h2>
    <div class="fieldline">
      <textarea name="swot_weaknesses" rows="5" placeholder="×œ×“×•×’××”:
â€¢ ××—×¡×•×¨ ×‘×›×•×— ××“×/×™×“×¢
â€¢ ×ª×§×¦×™×‘ ×©×™×•×•×§ ××•×’×‘×œ
â€¢ ×ª×”×œ×™×›×™× ×¤× ×™××™×™× ××™×˜×™×™×"></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×—×•×œ×©×•×ª</div>
  </div>
</section>

<!-- Q4: SWOT â€“ ×”×–×“×× ×•×™×•×ª -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">SWOT â€“ ×”×–×“×× ×•×™×•×ª: ××™×œ×• ××’××•×ª ××• × ×™×©×•×ª ×¤×•×ª×—×•×ª ××¤×©×¨×•×ª ×œ×¦××™×—×”?</h2>
    <div class="fieldline">
      <textarea name="swot_opportunities" rows="5" placeholder="×œ×“×•×’××”:
â€¢ ××’××ª ×§×™×™××•×ª/AI
â€¢ × ×™×©×” ×œ× ××˜×•×¤×œ×ª
â€¢ ×©×™×ª×•×¤×™ ×¤×¢×•×œ×” ××¡×˜×¨×˜×’×™×™×"></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×”×–×“×× ×•×™×•×ª</div>
  </div>
</section>

<!-- Q5: SWOT â€“ ×¡×™×›×•× ×™× -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">SWOT â€“ ×¡×™×›×•× ×™×: ××™×œ×• ××ª×—×¨×™×, ×¨×’×•×œ×¦×™×•×ª ××• ×’×•×¨××™× ×—×™×¦×•× ×™×™× ×¢×œ×•×œ×™× ×œ×¤×’×•×¢ ×‘× ×•?</h2>
    <div class="fieldline">
      <textarea name="swot_threats" rows="5" placeholder="×œ×“×•×’××”:
â€¢ ××ª×—×¨×” ×‘×™× ×œ××•××™ ×—×–×§
â€¢ ×¨×’×•×œ×¦×™×” ××—××™×¨×”
â€¢ ×™×¨×™×“×” ×‘×‘×™×§×•×© ×¢×§×‘ ××¦×‘ ×”×©×•×§"></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×¡×™×›×•× ×™×</div>
  </div>
</section>

<!-- Q6: ××ª×—×¨×™× (×¨×©×™××” ×¢× URL) -->

<!-- Q7: Having -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">Having â€“ ××™×œ×• × ×›×¡×™×, ×”×¦×œ×—×•×ª ××• ×”×™×©×’×™× ×›×‘×¨ ×”×©×’× ×•?</h2>
    <div class="fieldline">
      <textarea name="vision_having" rows="5" placeholder="×œ×“×•×’××”: 100+ ×œ×§×•×—×•×ª ×¤×¢×™×œ×™×, ×§×• ××•×¦×¨×™× ×—×“×©, ×¤×¨×¡×™ ×—×“×©× ×•×ª..."></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×”×™×©×’×™×</div>
  </div>
</section>

<!-- Q8: Being -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">Being â€“ ××™×š ×× ×—× ×• ××¨×’×™×©×™× ×‘×¢×§×‘×•×ª ×”×“×¨×š ×©×¢×‘×¨× ×•?</h2>
    <div class="fieldline">
      <textarea name="vision_being" rows="4" placeholder="×œ×“×•×’××”: ×’××•×•×”, ×ª×—×•×©×ª ××©××¢×•×ª, ×“×¨×™×™×‘ ×œ×¦××™×—×”..."></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×ª×—×•×©×•×ª</div>
  </div>
</section>

<!-- Q9: Doing -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">Doing â€“ ××™×œ×• ×¤×¢×™×œ×•×™×•×ª ×× ×—× ×• ×¢×•×©×™× ×‘×¤×•×¢×œ ×”×™×•×?</h2>
    <div class="fieldline">
      <textarea name="vision_doing" rows="5" placeholder="×œ×“×•×’××”: ×™×¦×™×¨×ª ×ª×•×›×Ÿ, ×¤×™×ª×•×— ××•×¦×¨, ×©×™×ª×•×¤×™ ×¤×¢×•×œ×”, ××›×™×¨×•×ª..."></textarea>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ×¤×¢×™×œ×•×™×•×ª</div>
  </div>
</section>

<!-- Q10: ××˜×¨×” ×©×™×•×•×§×™×ª (×¢× datalist ××•×¤×¦×™×•× ×œ×™) -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">××”×™ ×”××˜×¨×” ×”×©×™×•×•×§×™×ª ×”××¨×›×–×™×ª ×©×œ× ×•?</h2>
    <div class="fieldline">
      <input type="text" name="marketing_goal" list="goalsList"
             placeholder="×œ×“×•×’××”: ×œ×”×’×“×™×œ ××›×™×¨×•×ª ×‘Ö¾20% ×‘×©× ×” ×”×§×¨×•×‘×”">
      <datalist id="goalsList">
        <option value="×”×’×“×œ×ª ×”×›× ×¡×•×ª/××›×™×¨×•×ª"></option>
        <option value="×”×’×“×œ×ª ×œ×™×“×™× ××™×›×•×ª×™×™×"></option>
        <option value="×”×¢×œ××ª ××•×“×¢×•×ª ×œ××•×ª×’"></option>
        <option value="×›× ×™×¡×” ×œ×©×•×§/× ×™×©×” ×—×“×©×”"></option>
        <option value="×©×™×¤×•×¨ ×”××¨×•×ª ×‘××ª×¨"></option>
        <option value="×©×™××•×¨ ×œ×§×•×—×•×ª ×•×”×’×“×œ×ª LTV"></option>
      </datalist>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">××¤×©×¨ ×œ×—×–×•×¨ ×œ××¢×œ×” ×¢× ×’×œ×™×œ×” ×§×¦×¨×” ×œ××¢×œ×”</div>
    <div class="error">× × ×œ××œ× ××˜×¨×”</div>
  </div>
</section>

<!-- Q11: ××¡×¨ ×¢×™×§×¨×™ (××“ ×ª×•×•×™×) -->
<section class="q tf" data-req>
  <div class="stage">
    <h2 class="ask">××”×• ×”××¡×¨ ×”×¢×™×§×¨×™ ×©×œ× ×• â€“ ×‘××©×¤×˜ ××—×“?</h2>
    <div class="fieldline">
      <input type="text" name="main_message" maxlength="140"
             placeholder="×œ×“×•×’××”: ×× ×—× ×• ×”×¤×ª×¨×•×Ÿ ×”××”×™×¨ ×•×”×××™×Ÿ ×œÖ¾___">
      <span class="char-hint" data-for="main_message">0/140</span>
      <button class="ok" type="button" data-next>××•×§×™×™</button>
    </div>
    <div class="meta">×˜×™×¤: ××¡×¨ ×—×“, ×‘×¨×•×¨ ×•××‘×“×œ</div>
    <div class="error">× × ×œ××œ× ××¡×¨</div>
  </div>
</section>

<!-- Q12: ×¨×¤×¨× ×¡×™×/×§×™×©×•×¨×™× (×¨×¤×™×˜×¨ ×¢× URL) -->




    <!-- Q (×¡×™×•×) -->
    <section class="q tf" data-req>
      <div class="stage">
        <h2 class="ask">××™×©×•×¨ ×¤×¨×˜×™×</h2>
        <div class="fieldline">
          <label style="display:flex;align-items:center;gap:10px;width:100%">
            <input type="checkbox" name="consent" style="width:18px;height:18px;accent-color:var(--primary)">
            ×××©×¨/×ª ×©×”×¤×¨×˜×™× × ×›×•× ×™×
          </label>
          <button class="ok" type="button" id="submitBtn">×©×œ×™×—×”</button>
        </div>
        <div class="meta">××¤×©×¨ ×’× Enter ×œ×©×œ×™×—×”</div>
        <div class="error">×—×•×‘×” ×œ××©×¨</div>
      </div>
    </section>
  </div>

  <!-- ×¤×•×˜×¨ × ×™×•×•×˜ ×›×œ×œ×™ -->
  <div class="footer">
    <button class="btn btn-ghost" id="prevBtn" type="button">×—×–×¨×”</button>
    <button class="btn btn-primary" id="nextBtn" type="button">×”××©×š</button>
  </div>

<!-- <script>
const $ = (s, el=document)=> el.querySelector(s);
const $$ = (s, el=document)=> Array.from(el.querySelectorAll(s));
const flow = $('#qflow');
const panels = $$('.q', flow);
const bar = $('#bar');
const counter = $('#counter');

let activeIndex = 0;
let animating = false;

// ===== ×•×•×œ×™×“×¦×™×” (× ×©×ª××© ×¨×§ ×‘×–××Ÿ "×©×œ×™×—×”") =====
function validatePanel(idx){
  const q = panels[idx];
  if(!q) return true;

  if(q.classList.contains('tf')){
    const input = q.querySelector('input, textarea, select');
    const check = input && input.type === 'checkbox' ? input.checked : (input?.value||'').trim();
    const ok = !!check;
    q.classList.toggle('invalid', !ok);
    return ok;
  }

  // ×œ××¡×š ×”×¨××©×•×Ÿ (classic)
  let ok = true;
  $$('.field', q).forEach(box=>{
    const input = box.querySelector('input, textarea, select');
    if(!input) return;
    let v = input.type === 'checkbox' ? input.checked : (input.value||'').trim();
    if(input.type === 'email' && v){
      const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if(!re.test(v)) { ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }else if(input.name === 'phone' && v){
      const re=/^0\d{1,2}-?\d{7}$/;
      if(!re.test(v)) { ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }else{
      if(!v){ ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }
  });
  return ok;
}

// ×¢×“×›×•×Ÿ ×¤×¡/××•× ×”
function updateProgress(i){
  const total = panels.length;
  const p = i/(Math.max(total-1,1));
  bar.style.insetInlineEnd = `${100 - Math.round(p*100)}%`;
  counter.textContent = `${Math.min(i+1,total)} / ${total}`;
}

// ===== ×’×œ×™×œ×” ××•× ×¤×©×ª (×œ×œ× ×—×¡×™××” ×¢×œ ×•×•×œ×™×“×¦×™×”) =====
function goTo(i){
  const target = Math.max(0, Math.min(i, panels.length-1));
  if(animating) return;

  const start = flow.scrollTop;
  const end = target * flow.clientHeight;
  const duration = 900; // ×©× ×” ×œ××”×™×¨×•×ª ×”×¨×¦×•×™×”
  const startTime = performance.now();
  animating = true;

  const prevSnap = flow.style.scrollSnapType;
  flow.style.scrollSnapType = 'none';

  function animate(now){
    const t = Math.min(1, (now - startTime) / duration);
    const ease = t<0.5 ? 2*t*t : -1+(4-2*t)*t; // easeInOutQuad
    flow.scrollTop = start + (end - start) * ease;
    if(t < 1){
      requestAnimationFrame(animate);
    }else{
      flow.scrollTop = end;
      flow.style.scrollSnapType = prevSnap || 'y mandatory';
      animating = false;
    }
  }
  requestAnimationFrame(animate);
}

// ×ª×¦×¤×™×ª ×¢×œ ×¤×× ×œ×™× â€“ ×¢×“×›×•×Ÿ ××™× ×“×§×¡/×¤×¡ ×•×¤×•×§×•×¡
const io = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting && e.intersectionRatio > 0.6){
      const i = panels.indexOf ? panels.indexOf(e.target) : Array.from(panels).indexOf(e.target);
      activeIndex = i;
      updateProgress(i);
      const inp = e.target.querySelector('input, textarea, select');
      if(inp) setTimeout(()=> inp.focus({preventScroll:true}), 40);
    }
  });
},{ root: flow, threshold:[0.6] });
panels.forEach(q=> io.observe(q));

// ×’×œ×’×œ×ª â€“ ×× ×™×¢×ª ×’×œ×™×œ×” ×˜×‘×¢×™×ª ×›×“×™ ×©×œ× "×ª×™×œ×—×" ×‘×× ×™××¦×™×”
flow.addEventListener('wheel', (e)=>{
  e.preventDefault();
  if(animating) return;
  const dir = Math.sign(e.deltaY);
  if(dir > 0) goTo(activeIndex+1);
  else if(dir < 0) goTo(activeIndex-1);
}, {passive:false});

// ××§×©×™×
flow.addEventListener('keydown', (e)=>{
  const tag = (e.target.tagName||'').toLowerCase();
  const isTextarea = tag === 'textarea';
  if(e.key === 'Enter' && !e.shiftKey && !isTextarea){
    e.preventDefault(); goTo(activeIndex+1);
  }else if(e.key === 'PageDown' || e.key === 'ArrowDown'){
    e.preventDefault(); goTo(activeIndex+1);
  }else if(e.key === 'PageUp' || e.key === 'ArrowUp'){
    e.preventDefault(); goTo(activeIndex-1);
  }
});

// ×›×¤×ª×•×¨×™×
$('#prevBtn').addEventListener('click', ()=> goTo(activeIndex-1));
$('#nextBtn').addEventListener('click', ()=> goTo(activeIndex+1));
$$('[data-next]').forEach(btn=> btn.addEventListener('click', ()=> goTo(activeIndex+1)));

// ===== ×©×œ×™×—×”: ×‘×•×“×§×™× ××ª ×›×œ ×”×¤×× ×œ×™× ×•×¨×§ ××– ×©×•×œ×—×™× =====
$('#submitBtn').addEventListener('click', ()=>{
  let allOk = true;
  for(let i=0;i<panels.length;i++){
    if(!validatePanel(i)) allOk = false;
  }
  if(!allOk){
    alert('×™×© ×©×“×•×ª ×©×—×™×™×‘×™× ×œ××œ× ×œ×¤× ×™ ×©×œ×™×—×”.');
    return;
  }

  const data = {};
  $$('#qflow input, #qflow textarea, #qflow select').forEach(inp=>{
    const key = inp.name || '';
    if(!key) return;
    data[key] = inp.type === 'checkbox' ? inp.checked : inp.value;
  });
  console.log('Submitting payload:', data);
  alert('× ×©×œ×—! (×‘×“××• ×–×” ×¨×§ console.log)');
  goTo(0);
});

// ××ª×—×•×œ
updateProgress(0);
const first = panels[0]?.querySelector('input, textarea, select');
if(first) first.focus({preventScroll:true});


  // ×œ×”×¦×™×’ ××™×“, ×œ×”×¡×ª×™×¨ ××—×¨×™ 2 ×©× ×™×•×ª
document.addEventListener('DOMContentLoaded', () => {
  const loader = document.getElementById('loader');
  if(!loader) return;
  setTimeout(() => {
    loader.classList.add('hide');
    loader.addEventListener('transitionend', () => loader.remove(), { once:true });
  }, 2000);
});
</script>
 -->



<script>
const $ = (s, el=document)=> el.querySelector(s);
const $$ = (s, el=document)=> Array.from(el.querySelectorAll(s));
const flow = $('#qflow');
const panels = $$('.q', flow);
const bar = $('#bar');
const counter = $('#counter');

let activeIndex = 0;
let animating = false;

// ===== ×•×•×œ×™×“×¦×™×” (× ×©×ª××© ×¨×§ ×‘×–××Ÿ "×©×œ×™×—×”") =====
function validatePanel(idx){
  const q = panels[idx];
  if(!q) return true;

  if(q.classList.contains('tf')){
    const input = q.querySelector('input, textarea, select');
    const check = input && input.type === 'checkbox' ? input.checked : (input?.value||'').trim();
    const ok = !!check;
    q.classList.toggle('invalid', !ok);
    return ok;
  }

  // ×œ××¡×š ×”×¨××©×•×Ÿ (classic)
  let ok = true;
  $$('.field', q).forEach(box=>{
    const input = box.querySelector('input, textarea, select');
    if(!input) return;
    let v = input.type === 'checkbox' ? input.checked : (input.value||'').trim();
    if(input.type === 'email' && v){
      const re=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if(!re.test(v)) { ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }else if(input.name === 'phone' && v){
      const re=/^0\d{1,2}-?\d{7}$/;
      if(!re.test(v)) { ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }else{
      if(!v){ ok=false; box.classList.add('invalid'); }
      else box.classList.remove('invalid');
    }
  });
  return ok;
}

// ×¢×“×›×•×Ÿ ×¤×¡/××•× ×”
function updateProgress(i){
  const total = panels.length;
  const p = i/(Math.max(total-1,1));
  bar.style.insetInlineEnd = `${100 - Math.round(p*100)}%`;
  counter.textContent = `${Math.min(i+1,total)} / ${total}`;
}

// ===== ×’×œ×™×œ×” ××•× ×¤×©×ª (×œ×œ× ×—×¡×™××” ×¢×œ ×•×•×œ×™×“×¦×™×”) =====
function goTo(i){
  const target = Math.max(0, Math.min(i, panels.length-1));
  if(animating) return;

  const start = flow.scrollTop;
  const end = target * flow.clientHeight;
  const duration = 900; // ××”×™×¨×•×ª ×× ×™××¦×™×”
  const startTime = performance.now();
  animating = true;

  const prevSnap = flow.style.scrollSnapType;
  flow.style.scrollSnapType = 'none';

  function animate(now){
    const t = Math.min(1, (now - startTime) / duration);
    const ease = t<0.5 ? 2*t*t : -1+(4-2*t)*t; // easeInOutQuad
    flow.scrollTop = start + (end - start) * ease;
    if(t < 1){
      requestAnimationFrame(animate);
    }else{
      flow.scrollTop = end;
      flow.style.scrollSnapType = prevSnap || 'y mandatory';
      animating = false;
    }
  }
  requestAnimationFrame(animate);
}

// ×ª×¦×¤×™×ª ×¢×œ ×¤×× ×œ×™× â€“ ×¢×“×›×•×Ÿ ××™× ×“×§×¡/×¤×¡ ×•×¤×•×§×•×¡
const io = new IntersectionObserver((entries)=>{
  entries.forEach(e=>{
    if(e.isIntersecting && e.intersectionRatio > 0.6){
      const i = panels.indexOf ? panels.indexOf(e.target) : Array.from(panels).indexOf(e.target);
      activeIndex = i;
      updateProgress(i);
      const inp = e.target.querySelector('input, textarea, select');
      if(inp) setTimeout(()=> inp.focus({preventScroll:true}), 40);
    }
  });
},{ root: flow, threshold:[0.6] });
panels.forEach(q=> io.observe(q));

// ×’×œ×’×œ×ª â€“ ×× ×™×¢×ª ×’×œ×™×œ×” ×˜×‘×¢×™×ª ×›×“×™ ×©×œ× "×ª×™×œ×—×" ×‘×× ×™××¦×™×”
flow.addEventListener('wheel', (e)=>{
  e.preventDefault();
  if(animating) return;
  const dir = Math.sign(e.deltaY);
  if(dir > 0) goTo(activeIndex+1);
  else if(dir < 0) goTo(activeIndex-1);
}, {passive:false});

// ××§×©×™×
flow.addEventListener('keydown', (e)=>{
  const tag = (e.target.tagName||'').toLowerCase();
  const isTextarea = tag === 'textarea';
  if(e.key === 'Enter' && !e.shiftKey && !isTextarea){
    e.preventDefault(); goTo(activeIndex+1);
  }else if(e.key === 'PageDown' || e.key === 'ArrowDown'){
    e.preventDefault(); goTo(activeIndex+1);
  }else if(e.key === 'PageUp' || e.key === 'ArrowUp'){
    e.preventDefault(); goTo(activeIndex-1);
  }
});

// ×›×¤×ª×•×¨×™×
$('#prevBtn').addEventListener('click', ()=> goTo(activeIndex-1));
$('#nextBtn').addEventListener('click', ()=> goTo(activeIndex+1));
$$('[data-next]').forEach(btn=> btn.addEventListener('click', ()=> goTo(activeIndex+1)));


// ========= ××™×¡×•×£ × ×ª×•× ×™× ×•×©×œ×™×—×” ×œ-n8n =========
function serializeForm(){
  const data = {};

  // 1) ×©×“×•×ª ×¤×©×•×˜×™× (×œ×œ× [] ×‘×©×)
  $$('#qflow input:not([name$="[]"]), #qflow textarea:not([name$="[]"]), #qflow select:not([name$="[]"])')
    .forEach(inp=>{
      if(!inp.name) return;
      data[inp.name] = (inp.type === 'checkbox') ? !!inp.checked : (inp.value ?? '');
    });

  // 2) ××ª×—×¨×™×: competitor_name[] / competitor_url[] / competitor_note[]
  const compNames = $$('input[name="competitor_name[]"]');
  const compUrls  = $$('input[name="competitor_url[]"]');
  const compNotes = $$('input[name="competitor_note[]"]');
  const competitors = [];
  const compLen = Math.max(compNames.length, compUrls.length, compNotes.length);
  for(let i=0;i<compLen;i++){
    const name = compNames[i]?.value?.trim() || '';
    const url  = compUrls[i]?.value?.trim()  || '';
    const note = compNotes[i]?.value?.trim() || '';
    if(name || url || note) competitors.push({name, url, note});
  }
  if(competitors.length) data.competitors = competitors;

  // 3) ×¨×¤×¨× ×¡×™×: ref_title[] / ref_url[] / ref_note[] (×”××—×¨×•×Ÿ ××•×¤×¦×™×•× ×œ×™)
  const refTitles = $$('input[name="ref_title[]"]');
  const refUrls   = $$('input[name="ref_url[]"]');
  const refNotes  = $$('input[name="ref_note[]"]');
  const references = [];
  const refLen = Math.max(refTitles.length, refUrls.length, refNotes.length);
  for(let i=0;i<refLen;i++){
    const title = refTitles[i]?.value?.trim() || '';
    const url   = refUrls[i]?.value?.trim()   || '';
    const note  = refNotes[i]?.value?.trim()  || '';
    if(title || url || note) references.push({title, url, note});
  }
  if(references.length) data.references = references;

  // 4) ××˜×
  data._meta = {
    userAgent: navigator.userAgent,
    ts: new Date().toISOString(),
    path: location.pathname
  };

  return data;
}

async function postToN8N(payload){
  const webhookUrl = 'https://n8n.scale4u.com/webhook-test/Details';
  const res = await fetch(webhookUrl, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(payload)
  });
  // ×”×—×–×¨×” ×©×œ n8n ×™×›×•×œ×” ×œ×”×™×•×ª ×˜×§×¡×˜/JSON â€” × × ×¡×” ×©× ×™×”×
  const text = await res.text();
  let json; try { json = JSON.parse(text); } catch(_) {}
  if(!res.ok){
    throw new Error(`HTTP ${res.status} â€“ ${text || res.statusText}`);
  }
  return json ?? { ok: true, raw: text };
}

// ===== ×©×œ×™×—×”: ×‘×•×“×§×™× ××ª ×›×œ ×”×¤×× ×œ×™× ×•×¨×§ ××– ×©×•×œ×—×™× =====
$('#submitBtn').addEventListener('click', async ()=>{
  let allOk = true;
  for(let i=0;i<panels.length;i++){
    if(!validatePanel(i)) allOk = false;
  }
  if(!allOk){
    alert('×™×© ×©×“×•×ª ×©×—×™×™×‘×™× ×œ××œ× ×œ×¤× ×™ ×©×œ×™×—×”.');
    return;
  }

  const payload = serializeForm();
  console.log('Submitting payload:', payload);

  const btn = $('#submitBtn');
  btn.disabled = true;
  const oldTxt = btn.textContent;
  btn.textContent = '×©×•×œ×—...';

  // ×× ×§×™×™× ×œ×•××“×¨ ×‘×¢××•×“ â€“ × ×•×›×œ ×œ×”×¦×™×’×•:
  const loader = document.getElementById('loader');
  if(loader){ loader.classList.remove('hide'); }

  try{
    const resp = await postToN8N(payload);
    console.log('n8n response:', resp);
    alert('× ×©×œ×— ×‘×”×¦×œ×—×”! ğŸ™Œ');

    // ××™×¤×•×¡ ×©×“×•×ª ×‘×¡×™×¡×™ (××•×¤×¦×™×•× ×œ×™)
    $$('#qflow input, #qflow textarea').forEach(el=>{
      if(el.type === 'checkbox') el.checked = false;
      else el.value = '';
    });

    // ×—×–×¨×” ×œ×ª×—×™×œ×ª ×”×–×¨×™××”
    goTo(0);
  }catch(err){
    console.error(err);
    alert('×©×œ×™×—×” × ×›×©×œ×”. × ×¡×”/×™ ×©×•×‘ ×‘×¢×•×“ ×¨×’×¢.');
  }finally{
    btn.disabled = false;
    btn.textContent = oldTxt;
    if(loader){
      loader.classList.add('hide');
      loader.addEventListener('transitionend', ()=> loader.remove(), { once:true });
    }
  }
});

// ××ª×—×•×œ
updateProgress(0);
const first = panels[0]?.querySelector('input, textarea, select');
if(first) first.focus({preventScroll:true});

// ×œ×”×¦×™×’ ×œ×•××“×¨ ××™×“, ×œ×”×¡×ª×™×¨ ××—×¨×™ 2 ×©× ×™×•×ª (×›×‘×¨ ×§×™×™× ××¦×œ×š)
document.addEventListener('DOMContentLoaded', () => {
  const loader = document.getElementById('loader');
  if(!loader) return;
  setTimeout(() => {
    loader.classList.add('hide');
    loader.addEventListener('transitionend', () => loader.remove(), { once:true });
  }, 2000);
});
</script>


</body>
</html>
